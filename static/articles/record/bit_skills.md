{
  "title": "按位(bit)操作的技巧积累",
  "profile": "按位操作技巧, 比如快速取模转换为按位与",
  "create_at": "2021-08-29T00:00:00",
  "update_at": "2021-08-29T00:00:00"
}

# 按位操作技巧

## 0x01 快速取模

当需要取模运算时, 如果模的值是2^n，
模的值可以变成[**按位与**][**模值减1**]进行运算。如下：
```c
r = a % b             //(当b = 2^n)

r = a & (b-1)
```

## 0x02 两数交换
两数交换，按照二进制看，即将不同的位交换，将相同的位保持不变，
在异或运算下，a ^ b = c 任意一个数可以看成是其他两个数的不同`bit`位，所以
主要是下面的第一步计算了`两数不同bit`, 知晓任意两个数，第三个数也可以异或出来。 
```
a > 0b101  5
b > 0b110  6

6     ^   5   = 3
0b110 ^ 0b101 = 0b011   //diff         a = b ^ a

6     ^   3   = 5
0b110 ^ 0b011 = 0b101                  b = b ^ a

5     ^   3   = 6
0b101 ^ 0b011 = 0b110                  a = b ^ a
```

## 0x03 表达式转布尔值
```
(!!sizeof(a))
```
